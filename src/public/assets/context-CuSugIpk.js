import{r as F,C as Z,s as C,aW as _,H as u,h as J,x as K,bt as X,D as L,E as b,bu as Y,m as G,J as Q,Z as N,v as ee,B as te,ag as $,K as x,aY as ne}from"./index-Dq3TnNJu.js";import{o as h,a as g,c as re}from"./Input-WxvPfhkY.js";import{f as V}from"./Space-C_T_MHn6.js";function ie(e){const t=F(!!e.value);if(t.value)return Z(t);const n=C(e,r=>{r&&(t.value=!0,n())});return Z(t)}function de(){return _()!==null}const fe=typeof window<"u",he=u("n-drawer-body"),pe=u("n-modal-body"),ye=u("n-modal-provider"),me=u("n-modal"),xe=u("n-popover-body");function k(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return r()}function S(e,t=!0,n=[]){return e.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(J(String(r)));return}if(Array.isArray(r)){S(r,t,n);return}if(r.type===K){if(r.children===null)return;Array.isArray(r.children)&&S(r.children,t,n)}else r.type!==X&&n.push(r)}}),n}function be(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const i=S(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}const l="@@coContext",ge={mounted(e,{value:t,modifiers:n}){e[l]={handler:void 0},typeof t=="function"&&(e[l].handler=t,g("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const r=e[l];typeof t=="function"?r.handler?r.handler!==t&&(h("clickoutside",e,r.handler,{capture:n.capture}),r.handler=t,g("clickoutside",e,t,{capture:n.capture})):(e[l].handler=t,g("clickoutside",e,t,{capture:n.capture})):r.handler&&(h("clickoutside",e,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[l];n&&h("clickoutside",e,n,{capture:t.capture}),e[l].handler=void 0}};function oe(e,t){console.error(`[vdirs/${e}]: ${t}`)}class se{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,n){const{elementZIndex:r}=this;if(n!==void 0){t.style.zIndex=`${n}`,r.delete(t);return}const{nextZIndex:i}=this;r.has(t)&&r.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,r.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t,n){const{elementZIndex:r}=this;r.has(t)?r.delete(t):n===void 0&&oe("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((n,r)=>n[1]-r[1]),this.nextZIndex=2e3,t.forEach(n=>{const r=n[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}const E=new se,d="@@ziContext",ve={mounted(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n;e[d]={enabled:!!i,initialized:!1},i&&(E.ensureZIndex(e,r),e[d].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n,a=e[d].enabled;i&&!a&&(E.ensureZIndex(e,r),e[d].initialized=!0),e[d].enabled=!!i},unmounted(e,t){if(!e[d].initialized)return;const{value:n={}}=t,{zIndex:r}=n;E.unregister(e,r)}};function A(e){return typeof e=="string"?document.querySelector(e):e()||null}const Ie=L({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:ie(Q(e,"show")),mergedTo:G(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?k("lazy-teleport",this.$slots):b(Y,{disabled:this.disabled,to:this.mergedTo},k("lazy-teleport",this.$slots)):null}});function D(e){return e instanceof HTMLElement}function M(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(D(n)&&(q(n)||M(n)))return!0}return!1}function P(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(D(n)&&(q(n)||P(n)))return!0}return!1}function q(e){if(!ae(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function ae(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"SELECT":case"TEXTAREA":return!0;default:return!1}}let f=[];const Ee=L({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:[String,Function],finalFocusTo:[String,Function],returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=N(),n=F(null),r=F(null);let i=!1,a=!1;const w=typeof document>"u"?null:document.activeElement;function p(){return f[f.length-1]===t}function v(o){var s;o.code==="Escape"&&p()&&((s=e.onEsc)===null||s===void 0||s.call(e,o))}ee(()=>{C(()=>e.active,o=>{o?(O(),g("keydown",document,v)):(h("keydown",document,v),i&&z())},{immediate:!0})}),te(()=>{h("keydown",document,v),i&&z()});function T(o){if(!a&&p()){const s=I();if(s===null||s.contains(re(o)))return;c("first")}}function I(){const o=n.value;if(o===null)return null;let s=o;for(;s=s.nextSibling,!(s===null||s instanceof Element&&s.tagName==="DIV"););return s}function O(){var o;if(!e.disabled){if(f.push(t),e.autoFocus){const{initialFocusTo:s}=e;s===void 0?c("first"):(o=A(s))===null||o===void 0||o.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",T,!0)}}function z(){var o;if(e.disabled||(document.removeEventListener("focus",T,!0),f=f.filter(y=>y!==t),p()))return;const{finalFocusTo:s}=e;s!==void 0?(o=A(s))===null||o===void 0||o.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&w instanceof HTMLElement&&(a=!0,w.focus({preventScroll:!0}),a=!1)}function c(o){if(p()&&e.active){const s=n.value,y=r.value;if(s!==null&&y!==null){const m=I();if(m==null||m===y){a=!0,s.focus({preventScroll:!0}),a=!1;return}a=!0;const W=o==="first"?M(m):P(m);a=!1,W||(a=!0,s.focus({preventScroll:!0}),a=!1)}}}function H(o){if(a)return;const s=I();s!==null&&(o.relatedTarget!==null&&s.contains(o.relatedTarget)?c("last"):c("first"))}function U(o){a||(o.relatedTarget!==null&&o.relatedTarget===n.value?c("last"):c("first"))}return{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:H,handleEndFocus:U}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return b(K,null,[b("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),b("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}}),R=new WeakSet;function Fe(e){R.add(e)}function $e(e){return!R.has(e)}function Se(e,t="default",n=void 0){const r=e[t];if(!r)return $("getFirstSlotVNode",`slot[${t}] is empty`),null;const i=V(r(n));return i.length===1?i[0]:($("getFirstSlotVNode",`slot[${t}] should have exactly one child`),null)}function we(e,t,n){if(!t)return null;const r=V(t(n));return r.length===1?r[0]:($("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function Te(e,t=[],n){const r={};return t.forEach(i=>{r[i]=e[i]}),Object.assign(r,n)}const{cubicBezierEaseIn:B,cubicBezierEaseOut:j}=ne;function ze({transformOrigin:e="inherit",duration:t=".2s",enterScale:n=".9",originalTransform:r="",originalTransition:i=""}={}){return[x("&.fade-in-scale-up-transition-leave-active",{transformOrigin:e,transition:`opacity ${t} ${B}, transform ${t} ${B} ${i&&`,${i}`}`}),x("&.fade-in-scale-up-transition-enter-active",{transformOrigin:e,transition:`opacity ${t} ${j}, transform ${t} ${j} ${i&&`,${i}`}`}),x("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${n})`}),x("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}const Ze=u("n-dialog-provider"),ke=u("n-dialog-api");export{Ee as F,Ie as L,me as a,Ze as b,ge as c,he as d,$e as e,ze as f,we as g,de as h,fe as i,ye as j,Te as k,ke as l,pe as m,k as n,be as o,xe as p,Se as q,Fe as r,ve as z};
