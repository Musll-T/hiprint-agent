import{i as f,_ as C,o as d,c as m,a as e,j as B,k as L,h as D,t as a,n as _,d as k,l as z,m as i,p as O,b as v,u as c,w as g,F as E}from"./index-Dq3TnNJu.js";import{f as S,s as T,a as U}from"./format-PD0jBUzQ.js";/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=f("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("CpuIcon",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=f("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=f("MemoryStickIcon",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=f("MonitorIcon",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-vue-next v0.470.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=f("WifiIcon",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),G={key:0,class:"stat-card-header"},J={class:"stat-body"},W={key:0,class:"stat-label"},H={key:1,class:"stat-detail"},Y={__name:"StatCard",props:{icon:{type:[Object,Function],default:null},iconClass:{type:String,default:""},label:{type:String,default:""},value:{type:[String,Number],default:"--"},subLabel:{type:String,default:""},mini:{type:Boolean,default:!1},animated:{type:Boolean,default:!1}},setup(l){return(n,u)=>(d(),m("div",{class:_(["stat-card",{mini:l.mini}])},[l.mini?k("",!0):(d(),m("div",G,[e("span",{class:_(["stat-icon",l.iconClass])},[(d(),B(L(l.icon),{size:14})),D(" "+a(l.label),1)],2)])),e("div",J,[e("p",{class:_(["stat-value tabular-nums",{"stat-value-animated":l.animated}])},a(l.value),3),l.subLabel?(d(),m("p",W,a(l.subLabel),1)):k("",!0),n.$slots.detail?(d(),m("div",H,[z(n.$slots,"detail",{},void 0,!0)])):k("",!0),z(n.$slots,"default",{},void 0,!0)])],2))}},p=C(Y,[["__scopeId","data-v-d349a98d"]]),Z={class:"mem-ring-wrap"},K={class:"mem-ring"},Q={viewBox:"0 0 48 48"},X=["stroke-dashoffset"],ee={class:"mem-ring-text tabular-nums"},te={class:"mem-ring-detail"},ae={class:"mem-ring-free"},se={__name:"MemRing",props:{percent:{type:Number,default:0},totalMem:{type:Number,default:0},freeMem:{type:Number,default:0}},setup(l){const n=l,u=2*Math.PI*20,o=i(()=>{const r=Math.min(Math.max(n.percent,0),100);return u*(1-r/100)}),h=i(()=>n.percent<60?"mem-low":n.percent<85?"mem-medium":"mem-high"),M=i(()=>{const r=n.totalMem-n.freeMem;return S(r>0?r:0)}),x=i(()=>S(n.totalMem)),I=i(()=>S(n.freeMem));return(r,t)=>(d(),m("div",Z,[e("div",K,[(d(),m("svg",Q,[t[0]||(t[0]=e("circle",{class:"mem-ring-bg",cx:"24",cy:"24",r:"20"},null,-1)),e("circle",{class:_(["mem-ring-fill",h.value]),cx:"24",cy:"24",r:"20","stroke-dasharray":u,"stroke-dashoffset":o.value},null,10,X)])),e("span",ee,a(l.percent)+"%",1)]),e("div",te,[e("small",null,a(M.value)+" / "+a(x.value),1),e("small",ae,a(I.value)+" 可用",1)])]))}},ne=C(se,[["__scopeId","data-v-b1ed8cd6"]]),le={class:"dashboard"},oe={class:"stats-grid"},ie={class:"badge badge-rendering"},ce={class:"badge badge-printing"},de={class:"badge badge-received"},re={class:"info-section"},ue={class:"info-grid"},me={class:"info-item"},ve={class:"info-value"},pe={class:"info-item"},he={class:"info-value"},fe={class:"info-item"},ye={class:"info-value"},be={class:"info-item"},_e={class:"info-value mono"},ke={key:0,class:"info-item"},ge={class:"info-value mono"},Me={class:"info-grid"},xe={class:"info-item"},Ie={class:"info-value"},Se={class:"info-item"},Ce={class:"info-value mono"},$e={__name:"DashboardView",setup(l){const n=O(),u=i(()=>n.systemStats),o=i(()=>u.value.system),h=i(()=>u.value.transit||null),M=i(()=>{var s;const t=(s=o.value)==null?void 0:s.cpuUsage;return t==null?"--":t.toFixed(1)+"%"}),x=i(()=>n.memUsagePercent+"%"),I=i(()=>{var t;return U((t=o.value)==null?void 0:t.uptime)}),r=i(()=>{const t=u.value.jobs;return{rendering:(t==null?void 0:t.rendering)||0,printing:(t==null?void 0:t.printing)||0,received:(t==null?void 0:t.received)||0}});return(t,s)=>(d(),m("div",le,[e("div",oe,[v(p,{icon:c(q),"icon-class":"stat-icon-cpu",label:"CPU",value:M.value,"sub-label":"处理器使用率",animated:!0},null,8,["icon","value"]),v(p,{icon:c(R),"icon-class":"stat-icon-mem",label:"MEMORY",value:x.value,animated:!0},{default:g(()=>{var y,b;return[v(ne,{percent:c(n).memUsagePercent,"total-mem":((y=o.value)==null?void 0:y.totalMem)||0,"free-mem":((b=o.value)==null?void 0:b.freeMem)||0},null,8,["percent","total-mem","free-mem"])]}),_:1},8,["icon","value"]),v(p,{icon:c(E),"icon-class":"stat-icon-jobs",label:"JOBS",value:String(c(n).activeJobCount),"sub-label":"活跃任务",animated:!0},{detail:g(()=>[e("span",ie,a(r.value.rendering)+" 渲染",1),e("span",ce,a(r.value.printing)+" 打印",1),e("span",de,a(r.value.received)+" 等待",1)]),_:1},8,["icon","value"]),v(p,{icon:c(P),"icon-class":"stat-icon-uptime",label:"UPTIME",value:I.value,"sub-label":"服务运行时间",animated:!0},null,8,["icon","value"]),v(p,{icon:c(A),"icon-class":"stat-icon-conn",label:"CONNECTIONS",value:String(u.value.connections||0),"sub-label":"Socket.IO 连接",animated:!0,mini:!0},null,8,["icon","value"])]),e("div",re,[v(p,{icon:c(j),"icon-class":"stat-icon-device",label:"DEVICE",value:""},{default:g(()=>{var y,b,$,V,N,w;return[e("div",ue,[e("div",me,[s[0]||(s[0]=e("span",{class:"info-label"},"主机名",-1)),e("span",ve,a(((y=o.value)==null?void 0:y.hostname)||"--"),1)]),e("div",pe,[s[1]||(s[1]=e("span",{class:"info-label"},"平台",-1)),e("span",he,a(((b=o.value)==null?void 0:b.platform)||"--")+" / "+a((($=o.value)==null?void 0:$.arch)||"--"),1)]),e("div",fe,[s[2]||(s[2]=e("span",{class:"info-label"},"Node.js",-1)),e("span",ye,a(((V=o.value)==null?void 0:V.nodeVersion)||"--"),1)]),e("div",be,[s[3]||(s[3]=e("span",{class:"info-label"},"Machine ID",-1)),e("span",_e,a(c(T)((N=o.value)==null?void 0:N.machineId)),1)]),(w=o.value)!=null&&w.agentId?(d(),m("div",ke,[s[4]||(s[4]=e("span",{class:"info-label"},"Agent ID",-1)),e("span",ge,a(o.value.agentId),1)])):k("",!0)])]}),_:1},8,["icon"]),h.value?(d(),B(p,{key:0,icon:c(F),"icon-class":"stat-icon-transit",label:"TRANSIT",value:""},{default:g(()=>[e("div",Me,[e("div",xe,[s[5]||(s[5]=e("span",{class:"info-label"},"连接状态",-1)),e("span",Ie,[e("span",{class:_(["conn-dot",{connected:h.value.connected}])},null,2),D(" "+a(h.value.connected?"已连接":"未连接"),1)])]),e("div",Se,[s[6]||(s[6]=e("span",{class:"info-label"},"服务地址",-1)),e("span",Ce,a(h.value.url||"--"),1)])])]),_:1},8,["icon"])):k("",!0)])]))}},we=C($e,[["__scopeId","data-v-cf754656"]]);export{we as default};
